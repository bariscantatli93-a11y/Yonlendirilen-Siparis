<!-- ... (head ve stil kısmı aynı kalıyor, sadece .status-teslim ve .wa-btn.disabled ekle) -->
<style>
    /* ... önceki stiller ... */
    .status-teslim { background: #dcfce7; color: #166534; }
    .wa-btn.disabled { background: #9ca3af; cursor: not-allowed; pointer-events: none; opacity: 0.7; }
</style>

<!-- ... login ve header aynı ... -->

<script>
    // ... önceki kodlar aynı ...

    // Sipariş kartı oluşturma kısmı (loadOrders içinde forEach)
    filteredOrders.forEach(order => {
        total += order.tutar;

        let statusClass = '';
        if (order.durum === 'Hazırlanıyor') statusClass = 'status-hazirlanıyor';
        else if (order.durum === 'Yolda') statusClass = 'status-yolda';
        else if (order.durum === 'Teslim Edildi') statusClass = 'status-teslim';

        const card = document.createElement('div');
        card.className = 'order-card';
        card.innerHTML = `
            <div class="flex justify-between items-start mb-3">
                <div>
                    <p class="font-black text-lg text-blue-900">Sipariş #${order.id}</p>
                    <p class="text-sm text-slate-600">${order.adres}</p>
                </div>
                <span class="status-badge \( {statusClass}"> \){order.durum}</span>
            </div>
            <p class="text-sm mb-2"><strong>Müşteri:</strong> ${order.musteri}</p>
            <p class="text-sm mb-3"><strong>Kurye:</strong> ${order.kurye} | Tutar: ${order.tutar} TL</p>
            <a href="https://wa.me/\( {order.telefon}?text= \){encodeURIComponent(
                `Sipariş #${order.id}\n` +
                `Müşteri: ${order.musteri}\n` +
                `Tutar: ${order.tutar} TL\n` +
                `Adres: ${order.adres}\n` +
                `Konum: https://www.google.com/maps?q=\( {order.lat}, \){order.lng}`
            )}" 
               target="_blank" 
               class="wa-btn ${order.durum === 'Teslim Edildi' ? 'disabled' : ''}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.93 14.42c-.38.38-1.12.74-1.65.82-.53.08-1.24.12-2.07-.09-.83-.21-1.53-.78-2.12-1.62-.59-.84-.98-1.91-1.08-2.76-.1-.85.09-1.61.57-2.14.48-.53 1.17-.82 1.92-.82h.24c.29 0 .57.06.83.18.26.12.49.3.68.52l.32.43c.19.25.27.56.21.87-.06.31-.25.58-.54.75l-.69.41c-.07.04-.1.13-.07.2l.29.78c.03.08.12.13.21.1l.78-.29c.07-.03.15 0 .2.07l.43.32c.22.17.4.4.52.66.12.26.18.54.18.83v.24c0 .75-.29 1.44-.82 1.92z"/></svg>
                ${order.durum === 'Teslim Edildi' ? 'Gönderildi' : 'Kuryeye Gönder'}
            </a>
        `;
        container.appendChild(card);

        // Haritaya pin ekle – Teslim edilen yeşil, diğerleri mavi
        const markerColor = order.durum === 'Teslim Edildi' ? 'green' : 'blue';
        const marker = L.marker([order.lat, order.lng], {
            icon: L.divIcon({
                className: 'custom-marker',
                html: `<div style="background-color:${markerColor}; width:20px; height:20px; border-radius:50%; border:3px solid white; box-shadow:0 0 5px rgba(0,0,0,0.5);"></div>`,
                iconSize: [20, 20],
                iconAnchor: [10, 10]
            })
        }).addTo(map)
        .bindPopup(`
            <b>Sipariş #${order.id}</b><br>
            ${order.adres}<br>
            Müşteri: ${order.musteri}<br>
            Tutar: ${order.tutar} TL<br>
            Kurye: ${order.kurye}<br>
            Durum: ${order.durum}
        `);
        markers.push(marker);
    });

    // ... diğer kodlar aynı (total-ciro güncelleme, harita fitBounds vs.)
</script>
